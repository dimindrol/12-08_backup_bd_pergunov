# Домашнее задание к занятию "Резервное копирование баз данных" - Пергунов Д.В

### Задание 1
1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день  
Для полного восстановления данных за предыдщий день, следует использовать полное резервное копирование.  
При полном резервном копировании создается копия всей базы данных.  
Полное резервное копирование следует выполняет на ежедневной основе, желательно в ночное время, для того чтобы уменьшить риск перегрузки каналов связи.  
Резервные копии, следует хранить в надежных локациях на различных серверах в разных локациях (для уменьшения риска потери данных)  
Также желательно проводить переодическое тестирование восстановление БД (для того чтобы убедиться, что БД создается корректно)  
1.2. Необходимо восстанавливать данные за час до предполагаемой поломки. 
В данном случае лучше использовать следующие комбинации:  
Чтобы восстновить базу данных за час до предполагаемой поломки, следует использовать Инкрементное резервное копирование. Инкреметное резервное копирование предполагает копирование только изменённых данных с момента последнего полного или инкрементного резервного копирования. Что уменьшает объем данных необходимый для хранения.  
Также следует использовать журналирование транзакций, для ведения журнала изменений данных в режиме реального времени. Если произойдет сбой можно восстновить БД до последней завершенной транзакции.  
Дифференциальное резервное копирование позволит сохранить изменения с момента последнего полного резервного копирования. Это метод быстрее, чем полное резервное копирование.  

### Задание 2
Пример команд: 
```
pg_dump -U USER -h localhost -p 5432 -F c -b -v -f database_backup.dump mydb
```
где  
-U [username] — имя пользователя базы данных.  
-h [hostname] — хост, на котором работает база данных.  
-p [port] — порт, на котором работает база данных.  
-F c — формат резервной копии (в данном случае, это custom format).  
-b — включить данные больших объектов.  
-v — включить подробный режим (verbose).  
-f [output_file] — имя файла, в который будет сохранена резервная копия.  
```
g_restore -U USER -h localhost -p 5432 -d mydb -v database_backup.dump
```
где  
-U [username] — имя пользователя базы данных.  
-h [hostname] — хост, на котором работает база данных.  
-p [port] — порт, на котором работает база данных.  
-d [database_name] — имя базы данных, в которую нужно восстановить данные.  
-v — включить подробный режим (verbose).  

### Задание 3
```
mysqlbackup --user=[username] --password --incremental
--incremental-base=dir:[backup_directory]/[previous_backup]
--backup-dir=[incremental_backup_directory]
--with-timestamp backup-and-apply-log
```
-user и --password: Указывают имя пользователя и пароль для подключения к базе данных.  
-incremental: Указывает, что выполняется инкрементное резервное копирование.  
-incremental-base: Указывает базу для инкрементного резервного копирования. В данном случае используется путь к предыдущему резервному копированию.  
-backup-dir: Указывает каталог для сохранения текущего инкрементного резервного копирования.  
-with-timestamp: Добавляет метку времени к имени создаваемого резервного каталога.  



